<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gerador BG-CODE ‚Äî BetGram</title>
<style>
  :root{--bg:#0b1324;--panel:#111827;--accent:#22c55e;--gold:gold}
  html,body{height:100%;margin:0;font-family:Inter, "Roboto Mono", monospace;background:var(--bg);color:#fff}
  .wrap{max-width:820px;margin:28px auto;padding:20px}
  .card{background:rgba(17,24,39,0.96);border:2px solid var(--gold);border-radius:12px;padding:18px;box-shadow:0 8px 40px rgba(0,0,0,.6)}
  h1{margin:0 0 12px;text-align:center;color:var(--gold)}
  label{display:block;color:var(--accent);font-weight:700;margin-top:10px;margin-bottom:6px}
  input[type=text], select, textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #334155;background:var(--panel);color:#fff;font-size:14px;box-sizing:border-box}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .col{flex:1;min-width:200px}
  .actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
  button{cursor:pointer;border:0;padding:10px 14px;border-radius:8px;font-weight:700}
  .btn-green{background:linear-gradient(90deg,var(--accent),var(--gold));color:var(--bg)}
  .btn-ghost{background:transparent;border:1px solid #334155;color:#fff}
  #output{margin-top:14px;padding:12px;background:var(--panel);border-radius:8px;border:1px dashed var(--gold);min-height:110px;white-space:pre-wrap;overflow:auto;font-size:13px}
  .muted{color:#94a3b8;font-size:13px;margin-top:8px}
  .hint{font-size:13px;color:#cbd5e1;margin-top:10px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>‚ö° Gerador BG-CODE ‚Äî BetGram</h1>

      <label>üèÖ Esporte</label>
      <select id="esporte">
        <option>Futebol</option>
        <option>T√™nis</option>
        <option>Basquete</option>
        <option>V√¥lei</option>
        <option>Outros</option>
      </select>

      <label>‚öîÔ∏è Confronto (times / jogadores)</label>
      <input id="confronto" type="text" placeholder="Ex: Flamengo x Palmeiras / Djokovic x Nadal">

      <div class="actions">
        <button id="btnGerar" class="btn-green">üîê Gerar BG-CODE</button>
        <button id="btnAbrirChat" class="btn-ghost">üîó Abrir no ChatGPT (pr√©-preenchido)</button>
        <button id="btnCopiar" class="btn-ghost">üìã Copiar BG-CODE</button>
      </div>

      <div id="output">üìã Resultado aparecer√° aqui ap√≥s clicar em "Gerar BG-CODE".</div>

      <div class="hint">
        Como funciona: o site cria uma string `BG-CODE::<base64>`.  
        Voc√™ pode abrir o ChatGPT j√° com essa string (bot√£o "Abrir no ChatGPT") ou copi√°-la e colar aqui no chat.  
        Se colar aqui, escreva tamb√©m: <code>Por favor, decodifique e gere a an√°lise.</code>
      </div>
    </div>
  </div>

<script>
(() => {
  const btnGerar = document.getElementById('btnGerar');
  const btnAbrirChat = document.getElementById('btnAbrirChat');
  const btnCopiar = document.getElementById('btnCopiar');
  const esporteEl = document.getElementById('esporte');
  const confrontoEl = document.getElementById('confronto');
  const output = document.getElementById('output');

  function montarPrompt(esporte, confronto){
    return `ChatGPT, analise todos os mercados entre ${confronto} no ${esporte}. ` +
           `Identifique os mercados com maior probabilidade de acontecer e informe a odd m√≠nima recomendada ` +
           `para que seja uma aposta de valor (exemplo: 'esse mercado √© bom se odd for acima de 1.85').`;
  }

  // base64 UTF-8 safe
  function toBase64(str){
    try {
      return btoa(unescape(encodeURIComponent(str)));
    } catch(e){
      // fallback (older browsers)
      return btoa(str);
    }
  }

  function gerarBgCode(){
    const esporte = (esporteEl.value || '').trim();
    const confronto = (confrontoEl.value || '').trim();
    if(!esporte || !confronto){ output.innerText = "‚ö†Ô∏è Preencha esporte e confronto."; return null; }
    const prompt = montarPrompt(esporte, confronto);
    const b64 = toBase64(prompt).replace(/\s+/g,''); // remove espa√ßos/cortes
    const code = `BG-CODE::${b64}`;
    output.innerText = `Prompt (vis√≠vel s√≥ pra voc√™):\n\n${prompt}\n\nBG-CODE gerado:\n\n${code}`;
    return { prompt, b64, code };
  }

  btnGerar.addEventListener('click', () => {
    gerarBgCode();
  });

  btnAbrirChat.addEventListener('click', () => {
    const res = gerarBgCode();
    if(!res) return;
    // monta url que preenche o chat.openai (par√¢metro q)
    const msg = encodeURIComponent(res.code);
    const url = `https://chat.openai.com/?q=${msg}`;
    window.open(url, '_blank');
  });

  btnCopiar.addEventListener('click', async () => {
    const res = gerarBgCode();
    if(!res) return;
    try {
      await navigator.clipboard.writeText(res.code);
      output.innerText += `\n\n‚úÖ BG-CODE copiado para a √°rea de transfer√™ncia. Cole aqui no chat e escreva: "Por favor, decodifique e gere a an√°lise."`;
    } catch(e){
      output.innerText += `\n\n‚ö†Ô∏è N√£o foi poss√≠vel copiar automaticamente. Selecione e copie manualmente:\n\n${res.code}`;
    }
  });

  // Enter at confronto triggers gerar
  confrontoEl.addEventListener('keydown', (ev) => {
    if(ev.key === 'Enter'){ ev.preventDefault(); gerarBgCode(); }
  });
})();
</script>
</body>
</html>
